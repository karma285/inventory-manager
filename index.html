<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>html5-qrcode ì¹´ë©”ë¼ í…ŒìŠ¤íŠ¸</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 400px;
    margin: 40px auto;
    text-align: center;
  }
  #reader {
    width: 100%;
    height: 300px;
    border: 1px solid #ddd;
    margin-top: 20px;
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>ğŸ“· ì¹´ë©”ë¼ & ë°”ì½”ë“œ ìŠ¤ìº” í…ŒìŠ¤íŠ¸</h1>
<button id="startButton">ì¹´ë©”ë¼ ì‹œì‘</button>
<div id="reader" style="display:none;"></div>

<script src="https://unpkg.com/html5-qrcode@2.2.1/minified/html5-qrcode.min.js"></script>
<script>
  const startButton = document.getElementById('startButton');
  const readerDiv = document.getElementById('reader');
  let html5QrCode;

  startButton.addEventListener('click', () => {
    startButton.style.display = 'none';
    readerDiv.style.display = 'block';

    html5QrCode = new Html5Qrcode("reader");

    Html5Qrcode.getCameras().then(cameras => {
      if (cameras && cameras.length) {
        const backCamera = cameras.find(cam => /back|rear|environment/gi.test(cam.label)) || cameras[0];
        html5QrCode.start(
          backCamera.id,
          {
            fps: 10,
            qrbox: 250
          },
          decodedText => {
            alert(`ë°”ì½”ë“œ ì¸ì‹: ${decodedText}`);
            html5QrCode.stop();
            readerDiv.style.display = 'none';
            startButton.style.display = 'inline-block';
          },
          errorMessage => {
            // ì—ëŸ¬ ë¬´ì‹œ
          }
        ).catch(err => {
          alert(`ì¹´ë©”ë¼ ì‹œì‘ ì˜¤ë¥˜: ${err}`);
          readerDiv.style.display = 'none';
          startButton.style.display = 'inline-block';
        });
      } else {
        alert("ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´ë©”ë¼ê°€ ì—†ìŠµë‹ˆë‹¤.");
        readerDiv.style.display = 'none';
        startButton.style.display = 'inline-block';
      }
    }).catch(err => {
      alert(`ì¹´ë©”ë¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: ${err}`);
      readerDiv.style.display = 'none';
      startButton.style.display = 'inline-block';
    });
  });
</script>
</body>
</html>
