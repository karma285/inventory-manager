<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>카메라 켜기 테스트</title>
<style>
  #testVideo {
    width: 100%;
    max-width: 400px;
    border: 1px solid #ccc;
    display: none; /* 처음엔 안 보이게 */
  }
</style>
</head>
<body>

<button id="cameraButton">카메라 켜기 (모바일)</button>
<video id="testVideo" autoplay playsinline muted></video>

<script>
const cameraButton = document.getElementById('cameraButton');
const testVideo = document.getElementById('testVideo');

cameraButton.onclick = async () => {
  alert("카메라 켜기 버튼 눌림");

  try {
    console.log("권한 요청중...");
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
    testVideo.srcObject = stream;
    testVideo.style.display = 'block';  // 카메라 영상 보이도록
    console.log("카메라 스트림 시작됨");
  } catch(e) {
    alert("카메라 권한 또는 접근 실패: " + e.message);
  }
};
</script>

</body>
</html>
